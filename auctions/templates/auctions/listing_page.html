{% extends "auctions/layout.html" %}

{% load crispy_forms_tags %}

{% block body %}
    <div class="container">
        {% if msg %}
            <div class="alert {{ msg.class }} alert-dismissible" role="alert">
                {{ msg.msg }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        {% endif %}

        <h2 class="fw-bold">Listing: {{ listing.title }}</h2>

        {% if listing.image_url %}
            <div class="listing-image-container text-center">
                <img class="listing-image" src="{{ listing.image_url }}" alt="{{ listing.title }}">
            </div>
        {% else %}
            <p class="text-center my-5">No Image Available</p>
        {% endif %}

        <p class="my-1">{{ listing.description }}</p>

        <h3 class="mt-3 fw-bold">${{ listing.current_price }}</h3>

        <form action="{% url 'place_bid' listing.id %}" method="post">
            {% csrf_token %}
            <p class="small mb-1">{{ bid_status }}</p>
            {{ form | crispy }}
            <input class="btn btn-primary" type="submit" value="Place Bid">
        </form>

        <h4 class="mt-3">Details</h4>
        <ul>
            <li>Listed by: {{ listing.seller }}</li>
            <li>Created {{ listing.date }}</li>
        </ul>
    </div>
{% endblock %}
